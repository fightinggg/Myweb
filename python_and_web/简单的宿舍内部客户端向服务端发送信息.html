<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <script type="text/javascript" src="/fightinggg/js/link.js"></script>

    <title>简单的宿舍内部客户端向服务端发送信息</title>
</head>

<body>
<div id="myweb">

    <!--    啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦-->
    <script type="text/javascript" src="/fightinggg/js/up_and_right.js"></script>
    <!--    啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦-->

    <div id="left">
        <div id="left_in">


            <center><h1>简单的宿舍内部客户端向服务端发送信息</h1></center>

            <div>
                <div style="border:1px solid #555555;width:100%;margin: 0 auto;">
                    <div style="margin-left:10px">
        <pre>
    服务端
<pre><span class="kn">from</span> <span class="nn">socket</span> <span class="k">import</span><span class="o">*</span>
<span class="n">ADDR</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;&#39;</span><span
            class="p">,</span><span class="mi">21567</span><span class="p">)</span>
<span class="n">udpSerSock</span><span class="o">=</span><span class="n">socket</span><span class="p">(</span><span
            class="n">AF_INET</span><span class="p">,</span><span class="n">SOCK_DGRAM</span><span class="p">)</span>
<span class="n">udpSerSock</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span
            class="n">ADDR</span><span class="p">)</span>
<span class="k">while</span> <span class="k">True</span><span class="p">:</span>
    <span class="n">data</span><span class="p">,</span> <span class="n">addr</span> <span class="o">=</span> <span
            class="n">udpSerSock</span><span class="o">.</span><span class="n">recvfrom</span><span
            class="p">(</span><span class="mi">1024</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">addr</span><span class="p">,</span><span
            class="n">end</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span
            class="n">decode</span><span class="p">())</span>

    <span class="n">data_return</span> <span class="o">=</span> <span class="s">&quot;收到&quot;</span>
    <span class="n">udpSerSock</span><span class="o">.</span><span class="n">sendto</span><span class="p">(</span><span
            class="n">data_return</span><span class="o">.</span><span class="n">encode</span><span
            class="p">(),</span><span class="n">addr</span><span class="p">)</span>

<span class="n">udpSerSock</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre>
</pre>
                    </div>
                </div>


                </br>
                <div style="border:1px solid #555555;width:100%;margin: 0 auto;"
                ">
                <div style="margin-left:10px">
        <pre>
    客户端
        <pre><span class="kn">from</span> <span class="nn">socket</span> <span class="k">import</span> <span
                class="o">*</span>
<span class="n">HOST</span> <span class="o">=</span> <span class="s">&#39;172.31.244.145&#39;</span>
<span class="n">PORT</span> <span class="o">=</span> <span class="mi">21567</span>
<span class="n">BUFSIZ</span> <span class="o">=</span> <span class="mi">1024</span>
<span class="n">ADDR</span> <span class="o">=</span> <span class="p">(</span><span class="n">HOST</span><span class="p">,</span><span
                    class="n">PORT</span><span class="p">)</span>
<span class="n">udpCliSock</span> <span class="o">=</span> <span class="n">socket</span><span class="p">(</span><span
                    class="n">AF_INET</span><span class="p">,</span><span class="n">SOCK_DGRAM</span><span
                    class="p">)</span>
<span class="k">while</span> <span class="k">True</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span
                    class="s">&#39;&gt; &#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="p">:</span>
        <span class="k">break</span>
    <span class="n">udpCliSock</span><span class="o">.</span><span class="n">sendto</span><span class="p">(</span><span
                    class="n">data</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span><span
                    class="n">ADDR</span><span class="p">)</span>
    <span class="n">data</span><span class="p">,</span><span class="n">addr</span><span class="o">=</span><span
                    class="n">udpCliSock</span><span class="o">.</span><span class="n">recvfrom</span><span
                    class="p">(</span><span class="mi">1024</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span
                    class="n">decode</span><span class="p">())</span>
<span class="n">udpCliSock</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></pre>
                </div>
            </div>
            </br>
            效果的话，很垃圾:</br>
            &nbsp; &nbsp; &nbsp; &nbsp;服务端先定义一个对象，然后绑定端口号，一直处于接受信息的状态</br>
            &nbsp; &nbsp; &nbsp; &nbsp;客户端每当客户发送信息至服务端就准备接受服务端的回应，然后打印出来即可</br>

            期间遇到的问题有这样几个：</br>
            &nbsp; &nbsp; &nbsp; &nbsp;1.发送和接受要分别编码和解码（encode和decode）</br>
            &nbsp; &nbsp; &nbsp; &nbsp;2.发现此工具只能用于校园大局域网CUG,原因未知</br>
            &nbsp; &nbsp; &nbsp; &nbsp;3.服务端发回去时所使用的地址，是乱猜的，可以使用，但为什么可以原因未知</br>
            &nbsp; &nbsp; &nbsp; &nbsp;4.考虑到聊天室可能涉及多线程，没有写</br>

            </br>头好疼，不写了

        </div>
    </div>


</div>
</div>

</div>
</body>
</html>


